{% extends "delicious/base.html" %}
{% load custom_tags %}
{% load threadedcommentstags %}

{% block content %}

<p class="paginator">{% if paginator.has_previous %}<span class="previous"><a href="{% url bookmark_list paginator.previous %}">Previous page</a></span>{% endif %}<span class="pages">{% for page in paginator.page_range %}{% if not page %}...{% else %}<a href="{% url bookmark_list page %}">{% ifequal page paginator.page %}[{{ page }}]{% else %}{{ page }}{% endifequal %}</a>{% endif %}{% endfor %}</span>{% if paginator.has_next %}<span class="next"><a href="{% url bookmark_list paginator.next %}">Next page</a></span>{% endif %}</p>

{% for bookmark in paginator.object_list %}
{% get_free_comment_count for bookmark as comments %}
<div class="entry">
<p class="meta"><span class="date">{{ bookmark.saved_date|date:"M d Y \a\t g:i a" }}</span> <span class="comments"><a href="{{ bookmark.get_absolute_url }}#comments">{{ comments }} comment{{ comments|pluralize}}</a></span></p> 
<h2><a href="{{ bookmark.get_absolute_url }}">{{ bookmark.description }}</a></h2>
{% if bookmark.extended_info %}
<p>{{ bookmark.extended_info }}</p>
{% endif %}
<p class="visit"><a href="{{ bookmark.url }}" title="Visit site">Visit site</a></p>
</div>
{% endfor %}

<p class="paginator">{% if paginator.has_previous %}<span class="previous"><a href="{% url bookmark_list paginator.previous %}">Previous page</a></span>{% endif %}<span class="pages">{% for page in paginator.page_range %}{% if not page %}...{% else %}<a href="{% url tumblelog_list page %}">{% ifequal page paginator.page %}[{{ page }}]{% else %}{{ page }}{% endifequal %}</a>{% endif %}{% endfor %}</span>{% if paginator.has_next %}<span class="next"><a href="{% url bookmark_list paginator.next %}">Next page</a></span>{% endif %}</p>

{% endblock %}

{% block sidebarcontent %}
    {% get_popular_tags delicious.Bookmark 40 as top_tags top_count %}
    <h3>Top 40 Link Tags</h3>
    <ul class="chart">
    {% for num, tag in top_tags %}
    <li><a href="{% url tag_detail tag %}">{{ tag }}</a><span class="count">{{ num }}</span><span style="width: {% widthratio num top_count 490 %}px" class="index"></span></a></li>
    {% endfor %}
    </ul>
{% endblock %}