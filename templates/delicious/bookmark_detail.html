{% extends "base.html" %}
{% block title %}Links: {{ object.description }}{% endblock %}

{% block content %}
<p><a href="{% url bookmark_list %}">Back to all links...</a></p>
<h2>{{ object.description }}</h2>

{% if object.extended_info %}
<p>{{ object.extended_info }}</p>
{% endif %}
<p>Visit: <a href="{{ object.url }}">{{ object.url }}</a></p>

{% load tagging_tags %}
{% tags_for_object object as tag_list %}
{% if tag_list %}
<p><strong>Related tags:</strong>{% for tag in tag_list %} <a href="{% url tag_detail tag %}" title="View all items tagged '{{ tag }}'">{{ tag }}</a>{% if not forloop.last %}, {% endif %}{% endfor %}</p>
{% endif %}

{% load threadedcommentstags %}
{% load gravatar %}

{% get_free_threaded_comment_tree for object as tree %}
{% get_gravatar_url for comment.email as gravatar %}

{% for comment in tree %}
<div class="comment" id="c{{ comment.id }}">
<p>{% if comment.website %}<a href="{{ comment.website }}">{% endif %}<img src="{{ comment.email|gravatar }}" alt="Gravatar for {{ comment.name }}" />{% if comment.website %}</a>{% endif %}{% if comment.website %}<a href="{{ comment.website }}">{% endif %}{{ comment.name }}{% if comment.website %}</a>{% endif %}</p>
{% auto_transform_markup comment %}
</div>
{% endfor %}

{% if object.enable_comments %}
<p>Post a comment</p>
<form method="post" action="{% get_free_comment_url object %}">
<p><label for="id_name">Name *:</label> <input id="id_name" type="text" name="name" maxlength="128" /></p>
<p><label for="id_website">Website:</label> <input id="id_website" type="text" name="website" maxlength="200" /></p>
<p><label for="id_email">Email:</label> <input id="id_email" type="text" name="email" maxlength="75" /></p>
<p><label for="id_comment">Comment *:</label> <textarea id="id_comment" rows="10" cols="40" name="comment"></textarea></p>
<p><input type="submit" value="Submit Comment" /></p>
</form>
{% else %}
<p>Comments are closed</p>
{% endif %}
{% endblock %}